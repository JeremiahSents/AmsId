FROM eclipse-temurin:21-jre-jammy
WORKDIR /app

# Copy pre-built JAR file
COPY target/amsIdea-0.0.1-SNAPSHOT.jar /app/amsIdea.jar

# Document Environment Variables (for clarity - these are set in ECS Task Definition later)
ENV PORT=8080
ENV SPRING_DATASOURCE_URL=jdbc:postgresql://amsdb.cluster-cjm8mkkaaqra.us-east-2.rds.amazonaws.com:5432/AmsProject
ENV SPRING_DATASOURCE_USERNAME=postgres
ENV SPRING_DATASOURCE_PASSWORD=oremsAdrian123
ENV FRONTEND_URL=http://your_frontend_url
ENV JWT_SECRET=3f32f99cd03306a815fb5ac3efeaf3c9578c58eb6ca41e70fe1182f6baf119c12b245df8e846933c2fad591e54afdafde8629c5d7f81da7f36bb22632a499700e3fe034131f71218bfedcd7da472e796fda2fa5c21db292984c870ba4f5fc780ba4bc24e7657a71c639267d579983880f114e0e22e58d531daaec843453fb1ae0316f8e09874b5c974b9935fb19d48da462e53413dc72e6d0c524e3ce098a74556aea2b96ac33125f95f34e438fc96034186c9a9535eb897d601fcab360e1ca8632fb3c916a2b9adc7e2b09e1c8ea7fb082efce28b0eee4767449b4b3de847cff7479b39524850c7fdd7d3c02274c62cfca2d3d5421255e9f1d841f0aee2ca11f9196e05912dba53e29672928b32811c6de7692ee242e51a261e32ce240b2a128dff15327db0cd35a511ced29bad59e3a5bf089f804b37782fc287574de4d98e2a75ab990d8737e5ef2c29fafd0166b8d80f5463589b03e3209c87763950306b79a811ce40f43037526b97532822e70028cd76de8e6c67d776088df43a6be765ee18395aae3667014d2e92fd5354776fafe2e43de4515d68eb33abda05ca7e0dbc515a1f308dda5dbd904e558f875370e99d2feb4cf6da64493c80af83ead3a780521f46fd1ee9bfe6808b477b0cdd3914e0c094addfd803c28a283b205695519c9937f06a330bd0c81b123aeb62038cfc43b385e64aaf6ee8ea0ed3f570e872


# Run the application, passing in PORT env variable
CMD ["java", "-jar", "-Dserver.port=$PORT", "amsIdea.jar"]